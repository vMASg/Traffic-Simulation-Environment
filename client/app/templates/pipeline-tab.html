<div class="view-panel pipeline-panel">
    <!-- TODO REFACTOR EXTRACT-->
    <div class="btn btn-default" data-ng-disabled="!data.id" data-ng-click="savePipeline()">Save</div>
    <div class="btn btn-default" data-ng-click="savePipelineAs()">Save as</div>
    <div class="btn btn-default" data-ng-disabled="!data.id" data-ng-click="deletePipeline()">Delete</div>
    <div class="btn btn-default" data-ng-disabled="!data.id" data-ng-click="runPipeline()">Run Pipeline</div>
    <script type="text/ng-template" id="nodeOptions.html">
        <div class="pipelinenode-options">
            <ul>
                <li>01</li>
                <li>02</li>
                <li>03</li>
            </ul>
        </div>
    </script>
</div>
<div class="pipeline-container">
    <div class="connections"></div>
    <div class="nodes" data-ui-on-drop="dropHandler($event, $data)" ng-mousemove="mousemove($event);drawpath($event)" ng-mouseup="stopMoving($event)">
        <div class="node-box" ng-repeat="nodeInfo in shapes" ng-mousedown="startMoving($event, null, nodeInfo);" style="visibility: hidden;" uib-popover-template="nodeOptions.html" uib-popover-title="Popover" uib-popover-trigger="none" uib-popover-placement="right-top" uib-popover-is-open="nodeInfo.optionsOpen" ng-context-menu="openContextMenu(nodeInfo)">
            <div class="title"><span>{{nodeInfo.title}}</span></div>
            <div class="inputs_outputs">
                <div class="io-row clearfix" ng-repeat="input in nodeInfo.inputs | limitTo:min(nodeInfo.inputs.length, nodeInfo.outputs.length)">
                    <div class="io-cell">
                        <div class="circle end" ng-mousedown="createEndingConnection($event, input)" ng-mouseup="finishStartingConnection($event, input)"></div>
                        <span>{{input.name}}</span>
                    </div>
                    <div class="io-cell">
                        <span>{{nodeInfo.outputs[$index].name}}</span>
                        <div class="circle start" ng-mousedown="createStartingConnection($event, nodeInfo.outputs[$index])" ng-mouseup="finishEndingConnection($event, nodeInfo.outputs[$index])"></div>
                    </div>
                </div>
                <div class="io-row clearfix" ng-repeat="input in nodeInfo.inputs | limitTo:nodeInfo.inputs.length:min(nodeInfo.inputs.length, nodeInfo.outputs.length)">
                    <div class="io-cell">
                        <div class="circle end" ng-mousedown="createEndingConnection($event, input)" ng-mouseup="finishStartingConnection($event, input)"></div>
                        <span>{{input.name}}</span>
                    </div>
                    <div class="io-cell"></div>
                </div>
                <div class="io-row clearfix" ng-repeat="output in nodeInfo.outputs | limitTo:nodeInfo.outputs.length:min(nodeInfo.inputs.length, nodeInfo.outputs.length)">
                    <div class="io-cell"></div>
                    <div class="io-cell">
                        <span>{{output.name}}</span>
                        <div class="circle start" ng-mousedown="createStartingConnection($event, output)" ng-mouseup="finishEndingConnection($event, output)"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>